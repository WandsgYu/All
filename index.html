<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading BTC Price...</title>
    <!-- 引入 Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #121212;
            font-family: "Arial", sans-serif;
        }

        .header {
            color: #fff;
            font-size: 2.5vw;
            margin-bottom: 20px;
            text-align: center;
            font-family: 'Dancing Script', cursive; /* 应用花哨字体 */
            font-weight: 700; /* 加粗 */
        }

        /* 其他样式保持不变 */
        .container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 15px;
            width: 80vw;
            height: 80vh;
            justify-items: center;
            align-items: center;
        }

        .box {
            width: 90%;
            height: 90%;
            background-color: #1e1e1e;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            box-sizing: border-box;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .box h1 {
            font-size: 6vw;
            margin: 0;
            font-weight: bold;
            transition: color 0.15s ease-in-out;
        }

        .box h2 {
            font-size: 2vw;
            margin-top: 10px;
            color: #888;
        }

        .box .positive {
            color: #00c853;
        }

        .box .negative {
            color: #f44336;
        }

        .footer {
            color: #fff;
            font-size: 2vw;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr 1fr 1fr;
                gap: 10px;
                width: 100vw;
                height: 100vh;
                padding: 10px;
            }

            .box {
                width: 100%;
                height: 100%;
                margin: 0;
            }

            .box h1 {
                font-size: 8vw;
            }

            .box h2 {
                font-size: 4vw;
            }

            .header {
                font-size: 5vw;
            }

            .footer {
                font-size: 4vw;
            }
        }
    </style>
</head>

<body>
       <div class="footer" id="profit">Loading</div>
    <div class="container">
        <div class="box" id="btc">
            <h1 id="btc-price">Loading...</h1>
            <h2>BTC</h2>
        </div>
        <div class="box" id="eth">
            <h1 id="eth-price">Loading...</h1>
            <h2>ETH</h2>
        </div>
        <div class="box" id="sol">
            <h1 id="sol-price">Loading...</h1>
            <h2>SOL</h2>
        </div>
        <div class="box" id="bnb">
            <h1 id="bnb-price">Loading...</h1>
            <h2>BNB</h2>
        </div>
        <div class="box" id="bgb">
            <h1 id="bgb-price">Loading...</h1>
            <h2>BGB</h2>
        </div>
        <div class="box" id="trump">
            <h1 id="trump-price">Loading...</h1>
            <h2>TRUMP</h2>
        </div>
        <div class="box" id="doge">
            <h1 id="doge-price">Loading...</h1>
            <h2>DOGE</h2>
        </div>
        <div class="box" id="VINE">
            <h1 id="VINE-price">Loading...</h1>
            <h2>VINE</h2>
        </div>
        <div class="box" id="MELANIA">
            <h1 id="MELANIA-price">Loading...</h1>
            <h2>MELANIA</h2>
        </div>
    </div>
    <div class="header">Trust your judgment.</div>
    

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const apiUrlBase = "https://api.bitget.com/api/mix/v1/market/ticker?symbol=";
            let previousPrices = {
                BTC: null,
                ETH: null,
                SOL: null,
                BNB: null,
                BGB: null,
                TRUMP: null,
                DOGE: null,
                VINE: null,
                MELANIA: null
            };

            // 仓位信息
            const position = {
                symbol: "BGB",
                type: "long", // 开多
                quantity: 202, // 持仓量
                entryPrice: 7.656, // 开仓价
                exchangeRate: 7.22 // 汇率
            };

            async function fetchPrice(symbol) {
                try {
                    const response = await fetch(`${apiUrlBase}${symbol}USDT_UMCBL`);
                    const data = await response.json();
                    return parseFloat(data.data.last);
                } catch (error) {
                    console.error("Error fetching price:", error);
                    return null;
                }
            }

            function getPriceClass(symbol, currentPrice) {
                const previousPrice = previousPrices[symbol];
                if (previousPrice === null) return "";
                if (currentPrice > previousPrice) return "positive";
                if (currentPrice < previousPrice) return "negative";
                return "";
            }

            // 计算仓位收益
            function calculateProfit(currentPrice) {
                const profit = (currentPrice - position.entryPrice) * position.quantity * position.exchangeRate+2769;
                return profit.toFixed(0); // 保留两位小数
            }

            async function updatePrices() {
                const btcPrice = await fetchPrice("BTC");
                const ethPrice = await fetchPrice("ETH");
                const solPrice = await fetchPrice("SOL");
                const bnbPrice = await fetchPrice("BNB");
                const bgbPrice = await fetchPrice("BGB");
                const trumpPrice = await fetchPrice("TRUMP");
                const dogePrice = await fetchPrice("DOGE");
                const VINEPrice = await fetchPrice("VINE");
                const MELANIAPrice = await fetchPrice("MELANIA");

                if (btcPrice === null || ethPrice === null || solPrice === null || bnbPrice === null || bgbPrice === null || trumpPrice === null || dogePrice === null || VINEPrice === null || MELANIAPrice === null) {
                    document.getElementById("btc-price").textContent = "Error";
                    document.getElementById("eth-price").textContent = "Error";
                    document.getElementById("sol-price").textContent = "Error";
                    document.getElementById("bnb-price").textContent = "Error";
                    document.getElementById("bgb-price").textContent = "Error";
                    document.getElementById("trump-price").textContent = "Error";
                    document.getElementById("doge-price").textContent = "Error";
                    document.getElementById("VINE-price").textContent = "Error";
                    document.getElementById("MELANIA-price").textContent = "Error";
                    document.getElementById("profit").textContent = "仓位收益：数据错误";
                    return;
                }

                // Update prices for each coin with specified decimal places
                const coins = [
                    { id: "btc", symbol: "BTC", price: Math.floor(btcPrice) },
                    { id: "eth", symbol: "ETH", price: Math.floor(ethPrice) },
                    { id: "sol", symbol: "SOL", price: Math.floor(solPrice) },
                    { id: "bnb", symbol: "BNB", price: Math.floor(bnbPrice) },
                    { id: "bgb", symbol: "BGB", price: bgbPrice.toFixed(3) }, // BGB价格精确到小数点后三位
                    { id: "trump", symbol: "TRUMP", price: trumpPrice.toFixed(1) },
                    { id: "doge", symbol: "DOGE", price: dogePrice.toFixed(3) },
                    { id: "VINE", symbol: "VINE", price: VINEPrice.toFixed(3) },
                    { id: "MELANIA", symbol: "MELANIA", price: MELANIAPrice.toFixed(2) }
                ];

                coins.forEach(({ id, symbol, price }) => {
                    const priceElement = document.getElementById(`${id}-price`);
                    priceElement.textContent = price;
                    const priceClass = getPriceClass(symbol, price);
                    if (priceClass) priceElement.classList.add(priceClass);
                });

                // 更新仓位收益
                const profit = calculateProfit(bgbPrice);
                document.getElementById("profit").textContent = `${profit}`;

                // Update the title with BTC, BGB, BNB prices
                document.title = `${Math.floor(btcPrice)} ${bgbPrice.toFixed(3)} ${Math.floor(bnbPrice)}`;

                // Save the current prices for comparison
                previousPrices = {
                    BTC: btcPrice,
                    ETH: ethPrice,
                    SOL: solPrice,
                    BNB: bnbPrice,
                    BGB: bgbPrice,
                    TRUMP: trumpPrice,
                    DOGE: dogePrice,
                    VINE: VINEPrice,
                    MELANIA: MELANIAPrice
                };

                // Re-fetch prices every 500ms
                setTimeout(updatePrices, 500);
            }

            updatePrices();
        });
    </script>
</body>

</html>
